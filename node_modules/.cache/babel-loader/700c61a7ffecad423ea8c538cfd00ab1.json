{"remainingRequest":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\src\\components\\admin\\Analytics\\Authors\\AuthorsTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\src\\components\\admin\\Analytics\\Authors\\AuthorsTable.vue","mtime":1689974806574},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686771862028},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1686771872096},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686771862028},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1686771882662},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\babel.config.js","mtime":1686568669000},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686771862028},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1686771872096},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686771862028},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1686771882662}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IEZpbHRlckFycm93c0ljb24gZnJvbSAiQC9hc3NldHMvaW1hZ2VzL2ljb25zL2ZpbHRlckFycm93cy5zdmc/aW5saW5lIjsKaW1wb3J0IEZpbHRlckFycm93c0ljb25EYXJrIGZyb20gIkAvYXNzZXRzL2ltYWdlcy9pY29ucy9kYXJrL2ZpbHRlckFycm93cy5zdmc/aW5saW5lIjsKaW1wb3J0IEFycm93RG93bkljb25EYXJrIGZyb20gIkAvYXNzZXRzL2ltYWdlcy9pY29ucy9kYXJrL2Fycm93RG93bi5zdmc/aW5saW5lIjsKaW1wb3J0IENvbW1lbnRJY29uRGFyayBmcm9tICJAL2Fzc2V0cy9pbWFnZXMvaWNvbnMvZGFyay9jb21tZW50LnN2Zz9pbmxpbmUiOwppbXBvcnQgSGVhcnRJY29uRGFyayBmcm9tICJAL2Fzc2V0cy9pbWFnZXMvaWNvbnMvZGFyay9oZWFydC5zdmc/aW5saW5lIjsKaW1wb3J0IFBhZ2luYXRvciBmcm9tICJAL2NvbXBvbmVudHMvbWFpbi9QYWdpbmF0b3IiOwppbXBvcnQgeyBtYXBHZXR0ZXJzIH0gZnJvbSAidnVleCI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgYXV0aG9yczogewogICAgICB0eXBlOiBBcnJheSwKICAgICAgZGVmdWxhdDogKCkgPT4gW10KICAgIH0KICB9LAogIGNvbXBvbmVudHM6IHsKICAgIEZpbHRlckFycm93c0ljb24sCiAgICBGaWx0ZXJBcnJvd3NJY29uRGFyaywKICAgIEFycm93RG93bkljb25EYXJrLAogICAgQ29tbWVudEljb25EYXJrLAogICAgSGVhcnRJY29uRGFyaywKICAgIFBhZ2luYXRvcgogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2luYXRlZEl0ZW1zOiBbXSwKICAgICAgc29ydDogIiIsCiAgICAgIGZpbHRlcmVkSXRlbXM6IFtdLAogICAgICByZXZlcnNlU29ydDogewogICAgICAgIGlkOiBmYWxzZSwKICAgICAgICBhdmFpbGFibGVDb3VudHJpZXM6IGZhbHNlLAogICAgICAgIG5hbWU6IGZhbHNlLAogICAgICAgIGxhc3RBY3RpdmU6IGZhbHNlLAogICAgICAgIHB1YmxpY2F0aW9uczogZmFsc2UsCiAgICAgICAgcmVwb3J0czogZmFsc2UsCiAgICAgICAgaHVtYW5Db21tZW50czogZmFsc2UsCiAgICAgICAgY29tbWVudHM6IGZhbHNlLAogICAgICAgIGZhdm91cml0ZTogZmFsc2UKICAgICAgfQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHNvcnRfYnkoZmllbGQsIHByaW1lcikgewogICAgICBsZXQgcmV2ZXJzZSA9ICF0aGlzLnJldmVyc2VTb3J0W2ZpZWxkXTsKICAgICAgY29uc3Qga2V5ID0gcHJpbWVyID8gZnVuY3Rpb24gKHgpIHsKICAgICAgICByZXR1cm4gcHJpbWVyKHhbZmllbGRdKTsKICAgICAgfSA6IGZ1bmN0aW9uICh4KSB7CiAgICAgICAgcmV0dXJuIHhbZmllbGRdOwogICAgICB9OwogICAgICB0aGlzLnJldmVyc2VTb3J0W2ZpZWxkXSA9IHJldmVyc2U7CiAgICAgIHJldmVyc2UgPSAhcmV2ZXJzZSA/IDEgOiAtMTsKICAgICAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICAgICAgcmV0dXJuIGEgPSBrZXkoYSksIGIgPSBrZXkoYiksIHJldmVyc2UgKiAoKGEgPiBiKSAtIChiID4gYSkpOwogICAgICB9OwogICAgfSwKICAgIGNoYW5nZURhdGEoZGF0YSkgewogICAgICB0aGlzLnBhZ2luYXRlZEl0ZW1zID0gZGF0YTsKICAgIH0sCiAgICBjaGFuZ2VGaWx0ZXJlZEl0ZW1zKGFycmF5ID0gdGhpcy5hdXRob3JzKSB7CiAgICAgIHRoaXMuZmlsdGVyZWRJdGVtcyA9IGFycmF5LmZpbHRlcihpdGVtID0+IHsKICAgICAgICByZXR1cm4gaXRlbS5hdmFpbGFibGVDb3VudHJpZXMuc29tZShlbGVtZW50ID0+IHRoaXMuYXZhaWxhYmxlQ291bnRyaWVzLmluY2x1ZGVzKGVsZW1lbnQpKSAmJiBpdGVtLmlkICE9IHRoaXMuY3VycmVudFVzZXIuaWQ7CiAgICAgIH0pOwogICAgfQogIH0sCiAgbW91bnRlZCgpIHsKICAgIHRoaXMuY2hhbmdlRmlsdGVyZWRJdGVtcyh0aGlzLmF1dGhvcnMpOwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIC4uLm1hcEdldHRlcnMoewogICAgICBhdmFpbGFibGVDb3VudHJpZXM6ICJNYWluL2dldEF2YWlsYWJsZUNvdW50cmllcyIsCiAgICAgIGN1cnJlbnRVc2VyOiAiVXNlcnMvZ2V0Q3VycmVudFVzZXIiCiAgICB9KSwKICAgIGlzRGFyaygpIHsKICAgICAgcmV0dXJuIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ2JvZHknKS5jbGFzc0xpc3QuY29udGFpbnMoJ2RhcmsnKTsKICAgIH0KICB9LAogIHdhdGNoOiB7CiAgICBhdXRob3JzKG5ld1ZhbHVlKSB7CiAgICAgIHRoaXMuY2hhbmdlRmlsdGVyZWRJdGVtcyhuZXdWYWx1ZSk7CiAgICB9LAogICAgYXZhaWxhYmxlQ291bnRyaWVzKCkgewogICAgICB0aGlzLmNoYW5nZUZpbHRlcmVkSXRlbXModGhpcy5hdXRob3JzKTsKICAgIH0KICB9Cn07"},{"version":3,"names":["FilterArrowsIcon","FilterArrowsIconDark","ArrowDownIconDark","CommentIconDark","HeartIconDark","Paginator","mapGetters","props","authors","type","Array","defulat","components","data","paginatedItems","sort","filteredItems","reverseSort","id","availableCountries","name","lastActive","publications","reports","humanComments","comments","favourite","methods","sort_by","field","primer","reverse","key","x","a","b","changeData","changeFilteredItems","array","filter","item","some","element","includes","currentUser","mounted","computed","isDark","document","querySelector","classList","contains","watch","newValue"],"sources":["src/components/admin/Analytics/Authors/AuthorsTable.vue"],"sourcesContent":["<template>\n  <div class=\"analytics-authors-table\">\n    <div class=\"analytics-authors-table__top\">\n      <div class=\"analytics-authors-table__row main-table_white\">\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('id', parseInt))\"\n        >\n          <p>Id</p>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark v-if=\"isDark\"/>\n            <FilterArrowsIcon v-else />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"\n            filteredItems.sort(sort_by('availableCountries', (a) => a.length))\n          \"\n        >\n          <p>Страна</p>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark v-if=\"isDark\"/>\n            <FilterArrowsIcon v-else />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('name', (a) => a.toUpperCase()))\"\n        >\n          <p>Автор</p>\n          <div class=\"analytics-authors-table__icon\">\n            <ArrowDownIconDark />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"\n            filteredItems.sort(\n              sort_by('lastActive', (a) => new Date(a).getTime())\n            )\n          \"\n        >\n          <p>Посл. актив</p>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark v-if=\"isDark\"/>\n            <FilterArrowsIcon v-else />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('publications', (a) => a.length))\"\n        >\n          <p>Кол-во Публ.</p>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark v-if=\"isDark\"/>\n            <FilterArrowsIcon v-else />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('reports', parseInt))\"\n        >\n          <p>Жалобы</p>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark v-if=\"isDark\"/>\n            <FilterArrowsIcon v-else />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('humanComments', parseInt))\"\n        >\n          <div class=\"analytics-authors-table__icon\">\n            <CommentIconDark  />\n          </div>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark v-if=\"isDark\"/>\n            <FilterArrowsIcon v-else />\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('comments', parseInt))\"\n        >\n          <p>Р. Спикера</p>\n          <div class=\"analytics-authors-table__icon\">\n            <CommentIconDark/>\n          </div>\n        </div>\n        <div\n          class=\"analytics-authors-table__parameter analytics-authors-table__column main-table__column\"\n          @click=\"filteredItems.sort(sort_by('favourite', (a) => a.length))\"\n        >\n          <div class=\"analytics-authors-table__icon\">\n            <HeartIconDark />\n          </div>\n          <div class=\"analytics-authors-table__icon\">\n            <FilterArrowsIconDark/>\n          </div>\n        </div>\n      </div>\n    </div>\n    <div class=\"analytics-authors-table__body main-content\">\n      <div\n        class=\"analytics-authors-table__row\"\n        v-for=\"item in paginatedItems\"\n        :key=\"item.id\"\n      >\n        <div class=\"analytics-authors-table__value main-table__column\">\n          <p>{{ item.id }}</p>\n        </div>\n        <div class=\"analytics-authors-table__value main-table__column\">\n          <ul class=\"main-table__list\">\n            <li v-for=\"country in item.availableCountries\" :key=\"country\">\n              <div class=\"main-table__icon\">\n                <img\n                  :src=\"\n                    require(`@/assets/images/icons/flags/${country.toLowerCase()}.svg`)\n                  \"\n                  alt=\"\"\n                />\n              </div>\n              <p class=\"main-table__text main-table__text_bold\">\n                {{ country }}\n              </p>\n            </li>\n          </ul>\n        </div>\n        <div class=\"analytics-authors-table__value main-table__column main-table__column_start\">\n          <div class=\"main-table-author\">\n            <div class=\"main-table-author__image\">\n              <img src=\"@/assets/images/users/avatar2.png\" alt=\"user\" />\n            </div>\n            <div class=\"main-table-author__info\">\n              <p class=\"main-table-author__name\">\n                {{ item.name }} {{ item.surname }}\n              </p>\n              <p class=\"main-table-author__tag\">{{ item.tag }}</p>\n              <ul class=\"main-table-author__list\">\n                <li\n                  v-for=\"role in item.roles\"\n                  :key=\"role\"\n                  :style=\"[\n                    role == 'Лидер мнений'\n                      ? { background: '#CEE9FF' }\n                      : { background: '#E2E2E2' },\n                  ]\"\n                >\n                  <p>{{ role }}</p>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <div class=\"analytics-authors-table__value main-table__column\">\n          <p>{{ item.lastActive }}</p>\n        </div>\n        <div\n          class=\"analytics-authors-table__value main-table__column\"\n          @click=\"sort = 'publications'\"\n        >\n          <p>{{ item.publications.length }}</p>\n        </div>\n        <div class=\"analytics-authors-table__value main-table__column\">\n          <p>{{ item.reports }}</p>\n        </div>\n        <div class=\"analytics-authors-table__value main-table__column\">\n          <p>{{ item.humanComments }}</p>\n        </div>\n        <div\n          class=\"analytics-authors-table__value main-table__column\"\n          @click=\"sort = 'comments'\"\n        >\n          <p>{{ item.comments }}</p>\n        </div>\n        <div class=\"analytics-authors-table__value main-table__column\">\n          <p>{{ item.favourite.length }}</p>\n        </div>\n      </div>\n    </div>\n    <Paginator :items=\"filteredItems\" @changePaginatedItems=\"changeData\" />\n  </div>\n</template>\n  <script>\nimport FilterArrowsIcon from \"@/assets/images/icons/filterArrows.svg?inline\";\nimport FilterArrowsIconDark from \"@/assets/images/icons/dark/filterArrows.svg?inline\";\nimport ArrowDownIconDark from \"@/assets/images/icons/dark/arrowDown.svg?inline\";\nimport CommentIconDark from \"@/assets/images/icons/dark/comment.svg?inline\";\nimport HeartIconDark from \"@/assets/images/icons/dark/heart.svg?inline\";\nimport Paginator from \"@/components/main/Paginator\";\nimport { mapGetters } from \"vuex\";\nexport default {\n  props: {\n    authors: {\n      type: Array,\n      defulat: () => [],\n    },\n  },\n  components: {\n    FilterArrowsIcon,\n    FilterArrowsIconDark,\n    ArrowDownIconDark,\n    CommentIconDark,\n    HeartIconDark,\n    Paginator,\n  },\n  data() {\n    return {\n      paginatedItems: [],\n      sort: \"\",\n      filteredItems: [],\n      reverseSort: {\n        id: false,\n        availableCountries: false,\n        name: false,\n        lastActive: false,\n        publications: false,\n        reports: false,\n        humanComments: false,\n        comments: false,\n        favourite: false,\n      },\n    };\n  },\n  methods: {\n    sort_by(field, primer) {\n      let reverse = !this.reverseSort[field];\n      const key = primer\n        ? function (x) {\n            return primer(x[field]);\n          }\n        : function (x) {\n            return x[field];\n          };\n      this.reverseSort[field] = reverse;\n\n      reverse = !reverse ? 1 : -1;\n      return function (a, b) {\n        return (a = key(a)), (b = key(b)), reverse * ((a > b) - (b > a));\n      };\n    },\n\n    changeData(data) {\n      this.paginatedItems = data;\n    },\n    changeFilteredItems(array = this.authors) {\n      this.filteredItems = array.filter((item) => {\n        return (\n          item.availableCountries.some((element) =>\n            this.availableCountries.includes(element)\n          ) && item.id != this.currentUser.id\n        );\n      });\n    },\n  },\n  mounted() {\n    this.changeFilteredItems(this.authors);\n  },\n  computed: {\n    ...mapGetters({\n      availableCountries: \"Main/getAvailableCountries\",\n      currentUser: \"Users/getCurrentUser\",\n    }),\n    isDark(){\n      return document.querySelector('body').classList.contains('dark')\n    }\n  },\n  watch: {\n    authors(newValue) {\n      this.changeFilteredItems(newValue);\n    },\n    availableCountries() {\n      this.changeFilteredItems(this.authors);\n    },\n  },\n};\n</script>\n  <style lang=\"scss\">\n.analytics-authors-table {\n  &__top {\n    color: #fff;\n  }\n  &__row {\n    display: grid;\n    grid-template-columns: 2fr 9fr 8fr 5fr 5fr 4fr 2fr 4fr 2fr;\n    justify-items: center;\n    align-items: center;\n  }\n  &__column {\n    height: 100%;\n    width: 100%;\n    padding: 8px;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n  }\n  &__parameter {\n    cursor: pointer;\n    user-select: none;\n    display: flex;\n    align-items: center;\n    column-gap: 10px;\n    p {\n      text-transform: uppercase;\n      font-size: 16px;\n      font-weight: 700;\n    }\n  }\n  &__icon {\n    width: 16px;\n    height: 16px;\n    display: flex;\n    align-items: center;\n  }\n  &__value {\n    color: #231f20;\n    font-weight: 500;\n    font-size: 14px;\n  }\n  @media screen and (min-width: 1280px) and (max-width: 1600px) {\n    &__parameter {\n      column-gap: 8px;\n      font-size: 14px;\n    }\n    &__row {\n      grid-template-columns: 2fr 4fr 6fr 5fr 5fr 4fr 2fr 4fr 2fr;\n    }\n  }\n  @media screen and (min-width: 744px) and (max-width: 1600px) {\n    &__parameter {\n      column-gap: 8px;\n      p {\n        font-size: 14px;\n      }\n    }\n  }\n  @media screen and (min-width: 320px) and (max-width: 1280px) {\n    &__row {\n      grid-template-columns: 2fr 3fr 6fr 4fr 4fr 3fr 2fr 3fr 2fr;\n    }\n  }\n}\n</style>"],"mappings":"AAyLA,OAAAA,gBAAA;AACA,OAAAC,oBAAA;AACA,OAAAC,iBAAA;AACA,OAAAC,eAAA;AACA,OAAAC,aAAA;AACA,OAAAC,SAAA;AACA,SAAAC,UAAA;AACA;EACAC,KAAA;IACAC,OAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,OAAA,EAAAA,CAAA;IACA;EACA;EACAC,UAAA;IACAZ,gBAAA;IACAC,oBAAA;IACAC,iBAAA;IACAC,eAAA;IACAC,aAAA;IACAC;EACA;EACAQ,KAAA;IACA;MACAC,cAAA;MACAC,IAAA;MACAC,aAAA;MACAC,WAAA;QACAC,EAAA;QACAC,kBAAA;QACAC,IAAA;QACAC,UAAA;QACAC,YAAA;QACAC,OAAA;QACAC,aAAA;QACAC,QAAA;QACAC,SAAA;MACA;IACA;EACA;EACAC,OAAA;IACAC,QAAAC,KAAA,EAAAC,MAAA;MACA,IAAAC,OAAA,SAAAd,WAAA,CAAAY,KAAA;MACA,MAAAG,GAAA,GAAAF,MAAA,GACA,UAAAG,CAAA;QACA,OAAAH,MAAA,CAAAG,CAAA,CAAAJ,KAAA;MACA,IACA,UAAAI,CAAA;QACA,OAAAA,CAAA,CAAAJ,KAAA;MACA;MACA,KAAAZ,WAAA,CAAAY,KAAA,IAAAE,OAAA;MAEAA,OAAA,IAAAA,OAAA;MACA,iBAAAG,CAAA,EAAAC,CAAA;QACA,OAAAD,CAAA,GAAAF,GAAA,CAAAE,CAAA,GAAAC,CAAA,GAAAH,GAAA,CAAAG,CAAA,GAAAJ,OAAA,KAAAG,CAAA,GAAAC,CAAA,KAAAA,CAAA,GAAAD,CAAA;MACA;IACA;IAEAE,WAAAvB,IAAA;MACA,KAAAC,cAAA,GAAAD,IAAA;IACA;IACAwB,oBAAAC,KAAA,QAAA9B,OAAA;MACA,KAAAQ,aAAA,GAAAsB,KAAA,CAAAC,MAAA,CAAAC,IAAA;QACA,OACAA,IAAA,CAAArB,kBAAA,CAAAsB,IAAA,CAAAC,OAAA,IACA,KAAAvB,kBAAA,CAAAwB,QAAA,CAAAD,OAAA,EACA,IAAAF,IAAA,CAAAtB,EAAA,SAAA0B,WAAA,CAAA1B,EAAA;MAEA;IACA;EACA;EACA2B,QAAA;IACA,KAAAR,mBAAA,MAAA7B,OAAA;EACA;EACAsC,QAAA;IACA,GAAAxC,UAAA;MACAa,kBAAA;MACAyB,WAAA;IACA;IACAG,OAAA;MACA,OAAAC,QAAA,CAAAC,aAAA,SAAAC,SAAA,CAAAC,QAAA;IACA;EACA;EACAC,KAAA;IACA5C,QAAA6C,QAAA;MACA,KAAAhB,mBAAA,CAAAgB,QAAA;IACA;IACAlC,mBAAA;MACA,KAAAkB,mBAAA,MAAA7B,OAAA;IACA;EACA;AACA"}]}