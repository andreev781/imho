{"remainingRequest":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\src\\components\\moderator\\Publications\\Table\\NewTable.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\src\\components\\moderator\\Publications\\Table\\NewTable.vue","mtime":1689966611114},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\babel.config.js","mtime":1686568669000},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686771862028},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\babel-loader\\lib\\index.js","mtime":1686771872096},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1686771862028},{"path":"C:\\Users\\Nocok\\OneDrive\\Рабочий стол\\imho4-admin-front-main\\node_modules\\vue-loader\\lib\\index.js","mtime":1686771882662}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgbWFwR2V0dGVycyB9IGZyb20gInZ1ZXgiOwppbXBvcnQgUGFnaW5hdG9yIGZyb20gIkAvY29tcG9uZW50cy9tYWluL1BhZ2luYXRvciI7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgcHVibGljYXRpb25zOiB7CiAgICAgIHR5cGU6IEFycmF5LAogICAgICBkZWZhdWx0OiAoKSA9PiBbXQogICAgfQogIH0sCiAgZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIHBhZ2luYXRlZEl0ZW1zOiBbXQogICAgfTsKICB9LAogIG1vdW50ZWQoKSB7CiAgICB0aGlzLmNoYW5nZVBlcmlvZCgpOwogIH0sCiAgY29tcG9uZW50czogewogICAgUGFnaW5hdG9yCiAgfSwKICBjb21wdXRlZDogewogICAgLi4ubWFwR2V0dGVycyh7CiAgICAgIGdldEF1dGhvcjogIk1haW4vZ2V0QXV0aG9yQnlJZCIsCiAgICAgIGdldFJhbmdlOiAiTWFpbi9nZXRSYW5nZSIsCiAgICAgIEN1cnJlbnRVc2VyOiAiVXNlcnMvZ2V0Q3VycmVudFVzZXIiLAogICAgICBnZXRUZXh0Rm9yUGVyaW9kOiAiTWFpbi9nZXRUZXh0Rm9yUGVyaW9kIiwKICAgICAgYXZhaWxhYmxlQ291bnRyaWVzOiAiTWFpbi9nZXRBdmFpbGFibGVDb3VudHJpZXMiCiAgICB9KSwKICAgIGZpbHRlcmVkUHVibGljYXRpb25zKCkgewogICAgICByZXR1cm4gdGhpcy5wdWJsaWNhdGlvbnMuZmlsdGVyKGl0ZW0gPT4gaXRlbS5zdGF0dXMgPT0gInVuZGVmaW5lZCIgJiYgaXRlbS5hdmFpbGFibGVDb3VudHJpZXMuc29tZShlbGVtZW50ID0+IHRoaXMuYXZhaWxhYmxlQ291bnRyaWVzLmluY2x1ZGVzKGVsZW1lbnQpKQogICAgICAvLyBuZXcgRGF0ZShpdGVtW3RoaXMuZ2V0VGV4dEZvclBlcmlvZF0pLmdldFRpbWUoKSA+PQogICAgICAvLyAgIHRoaXMuZ2V0UmFuZ2Uuc3RhcnQgJiYKICAgICAgLy8gbmV3IERhdGUoaXRlbVt0aGlzLmdldFRleHRGb3JQZXJpb2RdKS5nZXRUaW1lKCkgPD0KICAgICAgLy8gICB0aGlzLmdldFJhbmdlLmVuZCAmJgogICAgICAvLyBpdGVtLmF2YWlsYWJsZUNvdW50cmllcy5zb21lKChlKSA9PgogICAgICAvLyAgIHRoaXMuQ3VycmVudFVzZXIuYXZhaWxhYmxlQ291bnRyaWVzLmluY2x1ZGVzKGUpCiAgICAgIC8vICkKICAgICAgKTsKICAgIH0KICB9LAoKICBtZXRob2RzOiB7CiAgICBjaGFuZ2VEYXRhKGRhdGEpIHsKICAgICAgdGhpcy5wYWdpbmF0ZWRJdGVtcyA9IGRhdGE7CiAgICB9LAogICAgY2hhbmdlUGVyaW9kKCkgewogICAgICB0aGlzLiRzdG9yZS5jb21taXQoIk1haW4vY2hhbmdlUmFuZ2VGb3JQZXJpb2QiLCB0aGlzLm1pbm1heCh0aGlzLnB1YmxpY2F0aW9ucywgdGhpcy5nZXRUZXh0Rm9yUGVyaW9kKSk7CiAgICB9LAogICAgbWlubWF4KHNvbWVBcnJheU9mT2JqZWN0cywgc29tZUtleSkgewogICAgICBjb25zdCB2YWx1ZXMgPSBzb21lQXJyYXlPZk9iamVjdHMubWFwKHZhbHVlID0+IG5ldyBEYXRlKHZhbHVlW3NvbWVLZXldKS5nZXRUaW1lKCkpOwogICAgICByZXR1cm4gewogICAgICAgIHN0YXJ0OiBNYXRoLm1pbi5hcHBseShudWxsLCB2YWx1ZXMpLAogICAgICAgIGVuZDogTWF0aC5tYXguYXBwbHkobnVsbCwgdmFsdWVzKQogICAgICB9OwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGdldFRleHRGb3JQZXJpb2QoKSB7CiAgICAgIHRoaXMuY2hhbmdlUGVyaW9kKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["mapGetters","Paginator","props","publications","type","Array","default","data","paginatedItems","mounted","changePeriod","components","computed","getAuthor","getRange","CurrentUser","getTextForPeriod","availableCountries","filteredPublications","filter","item","status","some","element","includes","methods","changeData","$store","commit","minmax","someArrayOfObjects","someKey","values","map","value","Date","getTime","start","Math","min","apply","end","max","watch"],"sources":["src/components/moderator/Publications/Table/NewTable.vue"],"sourcesContent":["<template>\n  <div class=\"publications-new-table main-content\">\n    <div class=\"publications-new-table__top main-table_white\">\n      <div class=\"publications-new-table__row\">\n        <div class=\"publications-new-table__parameter main-table__column\">\n          <p>Id</p>\n        </div>\n        <div class=\"publications-new-table__parameter main-table__column\">\n          <p>Заголовок</p>\n        </div>\n        <div class=\"publications-new-table__parameter main-table__column\">\n          <p>Страны</p>\n        </div>\n        <div class=\"publications-new-table__parameter main-table__column\">\n          <p>Автор</p>\n        </div>\n        <div class=\"publications-new-table__parameter main-table__column\">\n          <p>Опубликовать</p>\n        </div>\n        <div class=\"publications-new-table__parameter main-table__column\">\n          <p>Создано</p>\n        </div>\n      </div>\n    </div>\n    <div class=\"publications-new-table__body\">\n      <router-link\n        class=\"publications-new-table__row\"\n        v-for=\"item in paginatedItems\"\n        :key=\"item.id\"\n        :to=\"{ name: 'PublicationsArticle', params: { id: item.id } }\"\n      >\n        <div class=\"publications-new-table__value main-table__column\">\n          <p>{{ item.id.toLocaleString() }}</p>\n        </div>\n        <div\n          class=\"publications-new-table__value main-table__title main-table__column\"\n        >\n          <p>{{ item.title }}</p>\n        </div>\n        <div class=\"publications-new-table__value main-table__column\">\n          <ul class=\"main-table__list main-table__list_direction\">\n            <li v-for=\"country in item.availableCountries\" :key=\"country\">\n              <div class=\"main-table__icon\">\n                <img\n                  :src=\"\n                    require(`@/assets/images/icons/flags/${country.toLowerCase()}.svg`)\n                  \"\n                  alt=\"\"\n                />\n              </div>\n              <p class=\"main-table__text main-table__text_bold\">\n                {{ country }}\n              </p>\n            </li>\n          </ul>\n        </div>\n        <div\n          class=\"publications-new-table__value main-table__column main-table__column_start\"\n        >\n          <div class=\"main-table-author\">\n            <div class=\"main-table-author__image\">\n              <img src=\"@/assets/images/users/avatar2.png\" alt=\"user\" />\n            </div>\n            <div class=\"main-table-author__info\">\n              <p class=\"main-table-author__name\">\n                {{\n                  getAuthor(item.authorId) ? getAuthor(item.authorId).name : \"\"\n                }}\n                {{\n                  getAuthor(item.authorId)\n                    ? getAuthor(item.authorId).surname\n                    : \"\"\n                }}\n              </p>\n              <p class=\"main-table-author__tag\">\n                {{\n                  getAuthor(item.authorId) ? getAuthor(item.authorId).tag : \"\"\n                }}\n              </p>\n              <ul class=\"main-table-author__list\">\n                <li\n                  v-for=\"role in getAuthor(item.authorId)\n                    ? getAuthor(item.authorId).roles\n                    : []\"\n                  :key=\"role\"\n                  :style=\"[\n                    role == 'Лидер мнений'\n                      ? { background: '#CEE9FF' }\n                      : { background: '#E2E2E2' },\n                  ]\"\n                >\n                  <p>{{ role }}</p>\n                </li>\n              </ul>\n            </div>\n          </div>\n        </div>\n        <div class=\"publications-new-table__value main-table__column\">\n          <p>\n            {{ new Date(item.publish).toLocaleDateString() }}\n            {{ new Date(item.publish).toLocaleTimeString().slice(0, -3) }}\n          </p>\n        </div>\n        <div class=\"publications-new-table__value main-table__column\">\n          <p>{{ new Date(item.created).toLocaleDateString() }}</p>\n        </div>\n      </router-link>\n    </div>\n    <Paginator\n      :items=\"filteredPublications\"\n      @changePaginatedItems=\"changeData\"\n    />\n  </div>\n</template>\n<script>\nimport { mapGetters } from \"vuex\";\nimport Paginator from \"@/components/main/Paginator\";\nexport default {\n  props: {\n    publications: {\n      type: Array,\n      default: () => [],\n    },\n  },\n  data() {\n    return {\n      paginatedItems: [],\n    };\n  },\n  mounted() {\n    this.changePeriod();\n  },\n  components: {\n    Paginator,\n  },\n  computed: {\n    ...mapGetters({\n      getAuthor: \"Main/getAuthorById\",\n      getRange: \"Main/getRange\",\n      CurrentUser: \"Users/getCurrentUser\",\n      getTextForPeriod: \"Main/getTextForPeriod\",\n      availableCountries: \"Main/getAvailableCountries\",\n    }),\n    filteredPublications() {\n      return this.publications.filter(\n        (item) =>\n          item.status == \"undefined\" &&\n          item.availableCountries.some((element) =>\n            this.availableCountries.includes(element)\n          )\n        // new Date(item[this.getTextForPeriod]).getTime() >=\n        //   this.getRange.start &&\n        // new Date(item[this.getTextForPeriod]).getTime() <=\n        //   this.getRange.end &&\n        // item.availableCountries.some((e) =>\n        //   this.CurrentUser.availableCountries.includes(e)\n        // )\n      );\n    }\n  },\n  methods: {\n    changeData(data) {\n      this.paginatedItems = data;\n    },\n    changePeriod() {\n      this.$store.commit(\n        \"Main/changeRangeForPeriod\",\n        this.minmax(this.publications, this.getTextForPeriod)\n      );\n    },\n    minmax(someArrayOfObjects, someKey) {\n      const values = someArrayOfObjects.map((value) =>\n        new Date(value[someKey]).getTime()\n      );\n      return {\n        start: Math.min.apply(null, values),\n        end: Math.max.apply(null, values),\n      };\n    },\n  },\n  watch: {\n    getTextForPeriod() {\n      this.changePeriod();\n    },\n  },\n};\n</script>\n<style lang=\"scss\">\n.publications-new-table {\n  &__top {\n    text-transform: uppercase;\n    background: #b90c0c;\n  }\n  &__parameter {\n    color: #fff !important;\n    font-weight: 700;\n  }\n  &__row {\n    display: grid;\n    grid-template-columns: 1fr 13fr 3fr 5fr 3fr 2fr;\n    color: #353132;\n  }\n  &__value {\n    p {\n      font-size: 14px;\n      font-weight: 500;\n    }\n  }\n  @media screen and (min-width: 744px) and (max-width: 1600px) {\n    &__row {\n      grid-template-columns: 1fr 9fr 2fr 5fr 3fr 2fr;\n    }\n  }\n  @media screen and (min-width: 320px) and (max-width: 744px) {\n    &__row {\n      grid-template-columns: 1fr 5fr 2fr 5fr 3fr 2fr;\n    }\n    &__moder img {\n      width: 24px;\n    }\n  }\n}\n</style>"],"mappings":"AAmHA,SAAAA,UAAA;AACA,OAAAC,SAAA;AACA;EACAC,KAAA;IACAC,YAAA;MACAC,IAAA,EAAAC,KAAA;MACAC,OAAA,EAAAA,CAAA;IACA;EACA;EACAC,KAAA;IACA;MACAC,cAAA;IACA;EACA;EACAC,QAAA;IACA,KAAAC,YAAA;EACA;EACAC,UAAA;IACAV;EACA;EACAW,QAAA;IACA,GAAAZ,UAAA;MACAa,SAAA;MACAC,QAAA;MACAC,WAAA;MACAC,gBAAA;MACAC,kBAAA;IACA;IACAC,qBAAA;MACA,YAAAf,YAAA,CAAAgB,MAAA,CACAC,IAAA,IACAA,IAAA,CAAAC,MAAA,mBACAD,IAAA,CAAAH,kBAAA,CAAAK,IAAA,CAAAC,OAAA,IACA,KAAAN,kBAAA,CAAAO,QAAA,CAAAD,OAAA;MAEA;MACA;MACA;MACA;MACA;MACA;MACA;MAAA,CACA;IACA;EACA;;EACAE,OAAA;IACAC,WAAAnB,IAAA;MACA,KAAAC,cAAA,GAAAD,IAAA;IACA;IACAG,aAAA;MACA,KAAAiB,MAAA,CAAAC,MAAA,CACA,6BACA,KAAAC,MAAA,MAAA1B,YAAA,OAAAa,gBAAA,EACA;IACA;IACAa,OAAAC,kBAAA,EAAAC,OAAA;MACA,MAAAC,MAAA,GAAAF,kBAAA,CAAAG,GAAA,CAAAC,KAAA,IACA,IAAAC,IAAA,CAAAD,KAAA,CAAAH,OAAA,GAAAK,OAAA,GACA;MACA;QACAC,KAAA,EAAAC,IAAA,CAAAC,GAAA,CAAAC,KAAA,OAAAR,MAAA;QACAS,GAAA,EAAAH,IAAA,CAAAI,GAAA,CAAAF,KAAA,OAAAR,MAAA;MACA;IACA;EACA;EACAW,KAAA;IACA3B,iBAAA;MACA,KAAAN,YAAA;IACA;EACA;AACA"}]}